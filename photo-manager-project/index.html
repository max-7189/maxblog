<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>PhotoManager: Organizing Memories, Simplifying Life - Ziyuan Zhao</title><meta name=Description content="Hugo theme - LoveIt"><meta property="og:url" content="https://max-7189.github.io/maxblog/photo-manager-project/">
<meta property="og:site_name" content="Ziyuan Zhao"><meta property="og:title" content="PhotoManager: Organizing Memories, Simplifying Life"><meta property="og:description" content="An intelligent photo management application helping users organize memories, with plans to integrate FastViT for AI-powered automatic classification."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-20T11:00:00+08:00"><meta property="article:modified_time" content="2025-05-06T13:54:36+12:00"><meta property="article:tag" content="IOS Development"><meta property="article:tag" content="Swift"><meta property="article:tag" content="SwiftUI"><meta property="article:tag" content="Photo Management"><meta property="article:tag" content="AI"><meta property="article:tag" content="Machine Learning"><meta property="og:image" content="https://max-7189.github.io/logo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://max-7189.github.io/logo.png"><meta name=twitter:title content="PhotoManager: Organizing Memories, Simplifying Life"><meta name=twitter:description content="An intelligent photo management application helping users organize memories, with plans to integrate FastViT for AI-powered automatic classification."><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=https://max-7189.github.io/maxblog/site.webmanifest><link rel=canonical href=https://max-7189.github.io/maxblog/photo-manager-project/><link rel=prev href=https://max-7189.github.io/maxblog/mermaid-test/><link rel=next href=https://max-7189.github.io/maxblog/graceai-project/><link rel=stylesheet href=/maxblog/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script src=https://max-7189.github.io/maxblog/lib/mermaid/mermaid.min.js></script><script src=https://max-7189.github.io/maxblog/lib/echarts/echarts.min.js></script><script>typeof window.mermaid=="undefined"&&(window.mermaid={initialize:function(){},render:function(){return{svg:""}}})</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"PhotoManager: Organizing Memories, Simplifying Life","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/max-7189.github.io\/maxblog\/photo-manager-project\/"},"image":["https:\/\/max-7189.github.io\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"iOS Development, Swift, SwiftUI, Photo Management, AI, Machine Learning","wordcount":2364,"url":"https:\/\/max-7189.github.io\/maxblog\/photo-manager-project\/","datePublished":"2024-11-20T11:00:00+08:00","dateModified":"2025-05-06T13:54:36+12:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"Max Zhao","logo":"https:\/\/max-7189.github.io\/images\/avatar.png"},"author":{"@type":"Person","name":"Max Zhao"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/maxblog/ title="Ziyuan Zhao"><span class=header-title-pre><i class='fas fa-laptop-code fa-fw' aria-hidden=true></i></span>Max Zhao</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/maxblog/posts/>Posts </a><a class=menu-item href=/maxblog/tags/>Tags </a><a class=menu-item href=/maxblog/categories/>Categories </a><a class=menu-item href=/maxblog/categories/documentation/>Docs </a><a class=menu-item href=/maxblog/about/>About </a><a class=menu-item href=https://github.com/max-7189 title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="menu-item language" title="Select Language"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/maxblog/photo-manager-project/ selected>English</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/maxblog/ title="Ziyuan Zhao"><span class=header-title-pre><i class='fas fa-laptop-code fa-fw' aria-hidden=true></i></span>Max Zhao</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/maxblog/posts/ title>Posts</a><a class=menu-item href=/maxblog/tags/ title>Tags</a><a class=menu-item href=/maxblog/categories/ title>Categories</a><a class=menu-item href=/maxblog/categories/documentation/ title>Docs</a><a class=menu-item href=/maxblog/about/ title>About</a><a class=menu-item href=https://github.com/max-7189 title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class=menu-item title="Select Language"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/maxblog/photo-manager-project/ selected>English</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">PhotoManager: Organizing Memories, Simplifying Life</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/maxblog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Max Zhao</a></span>&nbsp;<span class=post-category>included in <a href=/maxblog/categories/projects/><i class="far fa-folder fa-fw" aria-hidden=true></i>Projects</a>&nbsp;<a href=/maxblog/categories/mobile-development/><i class="far fa-folder fa-fw" aria-hidden=true></i>Mobile Development</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2024-11-20>2024-11-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;2364 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;12 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#project-origins-a-journey-to-find-memories>Project Origins: A Journey to Find Memories</a></li><li><a href=#technical-vision-not-just-a-photo-browser>Technical Vision: Not Just a Photo Browser</a></li><li><a href=#technical-depth-building-a-reliable-photo-management-system>Technical Depth: Building a Reliable Photo Management System</a><ul><li><a href=#core-architecture-flexible-application-of-the-mvvm-pattern>Core Architecture: Flexible Application of the MVVM Pattern</a></li><li><a href=#photo-loading-system-balancing-performance-and-experience>Photo Loading System: Balancing Performance and Experience</a></li><li><a href=#memory-management-window-loading-mechanism>Memory Management: Window Loading Mechanism</a></li><li><a href=#user-experience-details-determine-success>User Experience: Details Determine Success</a></li><li><a href=#data-persistence-never-lose-any-marks>Data Persistence: Never Lose Any Marks</a></li></ul></li><li><a href=#development-process-challenges-and-growth>Development Process: Challenges and Growth</a></li><li><a href=#future-vision-ai-powered-photo-management-with-fastvit>Future Vision: AI-Powered Photo Management with FastViT</a><ul><li><a href=#the-new-era-of-intelligent-photo-analysis>The New Era of Intelligent Photo Analysis</a></li><li><a href=#fastvit-integration-plan>FastViT Integration Plan</a><ul><li><a href=#phase-one-basic-recognition-capabilities>Phase One: Basic Recognition Capabilities</a></li><li><a href=#phase-two-advanced-facial-and-group-analysis>Phase Two: Advanced Facial and Group Analysis</a></li><li><a href=#phase-three-intelligent-organization-and-narrative>Phase Three: Intelligent Organization and Narrative</a></li></ul></li><li><a href=#technical-challenges-and-solutions>Technical Challenges and Solutions</a><ul><li><a href=#1-mobile-performance-optimization>1. Mobile Performance Optimization</a></li><li><a href=#2-privacy-protection>2. Privacy Protection</a></li><li><a href=#3-continuous-learning-and-personalization>3. Continuous Learning and Personalization</a></li></ul></li><li><a href=#future-ai-driven-user-experience>Future AI-Driven User Experience</a></li></ul></li><li><a href=#conclusion-a-project-about-memories>Conclusion: A Project About Memories</a></li></ul></nav></div></div><div class=content id=content><h1 id=photomanager-organizing-memories-simplifying-life>PhotoManager: Organizing Memories, Simplifying Life</h1><h2 id=project-origins-a-journey-to-find-memories>Project Origins: A Journey to Find Memories</h2><p>It all began on an ordinary evening when a casual conversation with an old friend led me on a journey to find memories. My friend mentioned a photo we had taken together years ago, and in that moment, those laughs and scenes felt as if they had happened just yesterday. I was eager to find that photo and relive those wonderful moments.</p><p>However, reality quickly gave me a harsh reminder—my photo library was cluttered with thousands of pictures, without any organization or structure. I had to resort to the most primitive method: scrolling through them one by one.</p><p>That night, lying in bed, I spent two full hours browsing through photos. My finger constantly swiped the screen as my eyes scanned image after image. During this process, I experienced an emotional rollercoaster:</p><p>Seeing old friends&rsquo; smiling faces made me smile involuntarily;</p><p>Glimpsing friends I had lost contact with for years brought a tinge of melancholy;</p><p>Viewing places I had once visited made those landscapes reappear before my eyes.</p><p>But at the same time, I discovered that my photo library was filled with numerous useless images: work screenshots, blurry photos, duplicate images&mldr; Not only did they occupy my storage space, but they also hindered me from finding truly precious memories.</p><p>It was at that moment that an idea flashed through my mind: Why not organize my photo library while browsing? Keep only the memories truly worth preserving and delete those insignificant images. This way, the next time I wanted to revisit old times, the journey would be smoother and more pure.</p><p>With this idea in mind, the &ldquo;PhotoManager&rdquo; project was born.</p><h2 id=technical-vision-not-just-a-photo-browser>Technical Vision: Not Just a Photo Browser</h2><p>From the beginning, I hoped to create not just an ordinary photo application, but a tool that could truly help people manage their memories. I set several core objectives for this project:</p><ol><li><strong>Smooth Browsing Experience</strong>: The flow of memories should be seamless, without lag or stuttering</li><li><strong>Intelligent Classification System</strong>: Organize photos along a timeline, making memories traceable</li><li><strong>Efficient Marking Function</strong>: Easily mark photos to keep or delete</li><li><strong>Optimized Memory Management</strong>: Maintain stability even when dealing with thousands of photos</li></ol><h2 id=technical-depth-building-a-reliable-photo-management-system>Technical Depth: Building a Reliable Photo Management System</h2><h3 id=core-architecture-flexible-application-of-the-mvvm-pattern>Core Architecture: Flexible Application of the MVVM Pattern</h3><p>The project adopts the MVVM (Model-View-ViewModel) architectural pattern, which not only creates a clear code structure but also achieves good separation between the UI layer and business logic layer. This separation becomes particularly important in applications handling large volumes of photos.</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>class</span> <span class=nc>PhotoViewModel</span><span class=p>:</span> <span class=n>ObservableObject</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>@</span><span class=n>Published</span> <span class=kd>var</span> <span class=nv>currentIndex</span> <span class=p>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=p>@</span><span class=n>Published</span> <span class=kd>var</span> <span class=nv>showingDeleteConfirmation</span> <span class=p>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>let</span> <span class=nv>photoManager</span><span class=p>:</span> <span class=n>PhotoManager</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Expose necessary data to the view</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nv>mediaItems</span><span class=p>:</span> <span class=p>[</span><span class=n>MediaItem</span><span class=p>]</span> <span class=p>{</span> <span class=n>photoManager</span><span class=p>.</span><span class=n>mediaItems</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nv>isInitialLoading</span><span class=p>:</span> <span class=nb>Bool</span> <span class=p>{</span> <span class=n>photoManager</span><span class=p>.</span><span class=n>isInitialLoading</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nv>loadingProgress</span><span class=p>:</span> <span class=nb>Float</span> <span class=p>{</span> <span class=n>photoManager</span><span class=p>.</span><span class=n>loadingProgress</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nv>pendingDeletionsCount</span><span class=p>:</span> <span class=nb>Int</span> <span class=p>{</span> <span class=n>mediaItems</span><span class=p>.</span><span class=bp>filter</span> <span class=p>{</span> <span class=nv>$0</span><span class=p>.</span><span class=n>markStatus</span> <span class=p>==</span> <span class=p>.</span><span class=n>delete</span> <span class=p>}.</span><span class=bp>count</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Other methods...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h3 id=photo-loading-system-balancing-performance-and-experience>Photo Loading System: Balancing Performance and Experience</h3><p>During development, the biggest technical challenge was how to handle a large number of high-resolution photos. If all original images were loaded directly, the application would quickly exhaust memory; if only thumbnails were loaded, the user experience would suffer.</p><p>To address this, I designed a multi-tiered image loading system:</p><ol><li><strong>Thumbnails</strong>: All photos are first loaded as thumbnails, ensuring quick display</li><li><strong>Preview Images</strong>: When a user swipes to a photo, a medium-quality preview image is loaded</li><li><strong>Full-Quality Images</strong>: When a user pauses at a particular photo, a full-quality image is loaded</li></ol><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>enum</span> <span class=nc>ImageQuality</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=n>thumbnail</span>     <span class=c1>// For thumbnail strips, fixed small size</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=n>preview</span>       <span class=c1>// Preview image, medium quality, fast loading</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=n>fullQuality</span>   <span class=c1>// Full quality, loaded when user lingers</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h3 id=memory-management-window-loading-mechanism>Memory Management: Window Loading Mechanism</h3><p>To solve memory issues, I implemented a &ldquo;window loading&rdquo; mechanism. Simply put, the application only keeps a certain number of photos before and after the user&rsquo;s current viewing position in memory, while other photos are released.</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>private</span> <span class=kd>func</span> <span class=nf>updateWindow</span><span class=p>(</span><span class=n>currentIndex</span><span class=p>:</span> <span class=nb>Int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Calculate range to keep: 50 photos before and after current position</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nv>start</span> <span class=p>=</span> <span class=bp>max</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>currentIndex</span> <span class=o>-</span> <span class=n>PhotoLoadingConfig</span><span class=p>.</span><span class=n>highQualityWindow</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nv>end</span> <span class=p>=</span> <span class=bp>min</span><span class=p>(</span><span class=n>mediaItems</span><span class=p>.</span><span class=bp>count</span><span class=p>,</span> <span class=n>currentIndex</span> <span class=o>+</span> <span class=n>PhotoLoadingConfig</span><span class=p>.</span><span class=n>highQualityWindow</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nv>keepRange</span> <span class=p>=</span> <span class=n>start</span><span class=p>..&lt;</span><span class=n>end</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Release memory for items outside range</span>
</span></span><span class=line><span class=cl>    <span class=n>releaseMemoryForItemsOutside</span><span class=p>(</span><span class=n>keepRange</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Update current window start position</span>
</span></span><span class=line><span class=cl>    <span class=n>currentWindowStart</span> <span class=p>=</span> <span class=n>keepRange</span><span class=p>.</span><span class=n>lowerBound</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p>This mechanism ensures that even when facing a library with tens of thousands of photos, the application can maintain smooth operation without crashing or lagging.</p><h3 id=user-experience-details-determine-success>User Experience: Details Determine Success</h3><p>When designing the user interface, I paid special attention to those small but crucial details:</p><ol><li><strong>Progressive Loading</strong>: The transition of photos from blurry to sharp is smooth, almost imperceptible to users</li><li><strong>Gesture Operations</strong>: Mark photos through intuitive swipe gestures—swipe up to delete, down to keep</li><li><strong>Visual Feedback</strong>: Marked photos have clear visual indicators, allowing users to immediately know which photos will be deleted</li><li><strong>Batch Operations</strong>: Support for deleting multiple marked photos at once, improving efficiency</li></ol><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>private</span> <span class=kd>var</span> <span class=nv>overlayButtons</span><span class=p>:</span> <span class=n>some</span> <span class=n>View</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>VStack</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Spacer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>HStack</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Button</span><span class=p>(</span><span class=n>action</span><span class=p>:</span> <span class=p>{</span> <span class=n>viewModel</span><span class=p>.</span><span class=n>markForDeletion</span><span class=p>(</span><span class=n>at</span><span class=p>:</span> <span class=n>viewModel</span><span class=p>.</span><span class=n>currentIndex</span><span class=p>)</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>Image</span><span class=p>(</span><span class=n>systemName</span><span class=p>:</span> <span class=s>&#34;trash&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>font</span><span class=p>(.</span><span class=n>title</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>foregroundColor</span><span class=p>(.</span><span class=n>red</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>padding</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>background</span><span class=p>(</span><span class=n>Circle</span><span class=p>().</span><span class=n>fill</span><span class=p>(.</span><span class=n>ultraThinMaterial</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>Spacer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>Button</span><span class=p>(</span><span class=n>action</span><span class=p>:</span> <span class=p>{</span> <span class=n>viewModel</span><span class=p>.</span><span class=n>keepCurrentPhoto</span><span class=p>(</span><span class=n>at</span><span class=p>:</span> <span class=n>viewModel</span><span class=p>.</span><span class=n>currentIndex</span><span class=p>)</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>Image</span><span class=p>(</span><span class=n>systemName</span><span class=p>:</span> <span class=s>&#34;star&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>font</span><span class=p>(.</span><span class=n>title</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>foregroundColor</span><span class=p>(.</span><span class=n>yellow</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>padding</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>background</span><span class=p>(</span><span class=n>Circle</span><span class=p>().</span><span class=n>fill</span><span class=p>(.</span><span class=n>ultraThinMaterial</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>padding</span><span class=p>(.</span><span class=n>horizontal</span><span class=p>,</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>padding</span><span class=p>(.</span><span class=n>bottom</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h3 id=data-persistence-never-lose-any-marks>Data Persistence: Never Lose Any Marks</h3><p>Core Data was used to implement the persistence of marking states, ensuring that users&rsquo; marks would not be lost when the application restarts:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>private</span> <span class=kd>func</span> <span class=nf>saveMarkForItem</span><span class=p>(</span><span class=kc>_</span> <span class=n>item</span><span class=p>:</span> <span class=n>MediaItem</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nv>context</span> <span class=p>=</span> <span class=n>CoreDataManager</span><span class=p>.</span><span class=n>shared</span><span class=p>.</span><span class=n>context</span>
</span></span><span class=line><span class=cl>    <span class=n>context</span><span class=p>.</span><span class=n>performAndWait</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>fetchRequest</span><span class=p>:</span> <span class=n>NSFetchRequest</span><span class=p>&lt;</span><span class=n>MediaItemEntity</span><span class=p>&gt;</span> <span class=p>=</span> <span class=n>MediaItemEntity</span><span class=p>.</span><span class=n>fetchRequest</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>fetchRequest</span><span class=p>.</span><span class=n>predicate</span> <span class=p>=</span> <span class=n>NSPredicate</span><span class=p>(</span><span class=n>format</span><span class=p>:</span> <span class=s>&#34;id == %@&#34;</span><span class=p>,</span> <span class=n>item</span><span class=p>.</span><span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>do</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>let</span> <span class=nv>results</span> <span class=p>=</span> <span class=k>try</span> <span class=n>context</span><span class=p>.</span><span class=n>fetch</span><span class=p>(</span><span class=n>fetchRequest</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kd>let</span> <span class=nv>entity</span> <span class=p>=</span> <span class=n>results</span><span class=p>.</span><span class=bp>first</span> <span class=p>??</span> <span class=n>MediaItemEntity</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>entity</span><span class=p>.</span><span class=n>id</span> <span class=p>=</span> <span class=n>item</span><span class=p>.</span><span class=n>id</span>
</span></span><span class=line><span class=cl>            <span class=n>entity</span><span class=p>.</span><span class=n>markStatus</span> <span class=p>=</span> <span class=nb>Int16</span><span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=n>markStatus</span><span class=p>.</span><span class=n>rawValue</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>context</span><span class=p>.</span><span class=n>hasChanges</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>try</span> <span class=n>context</span><span class=p>.</span><span class=n>save</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=bp>print</span><span class=p>(</span><span class=s>&#34;Failed to save mark: </span><span class=si>\(</span><span class=n>error</span><span class=si>)</span><span class=s>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h2 id=development-process-challenges-and-growth>Development Process: Challenges and Growth</h2><p>The process of developing this application was not smooth sailing. The initial version was simple and straightforward but frequently crashed when handling a large number of photos. Through repeated testing and optimization, I gradually improved the memory management mechanism and loading strategy.</p><p>Particularly when implementing video preview functionality, I encountered numerous challenges. iOS&rsquo;s video loading mechanism differs significantly from that of images and requires special handling:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>func</span> <span class=nf>playVideo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=bp>print</span><span class=p>(</span><span class=s>&#34;[VideoCardViewModel] Attempting to play video - ID: </span><span class=si>\(</span><span class=n>mediaItem</span><span class=p>.</span><span class=n>id</span><span class=si>)</span><span class=s>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=kd>let</span> <span class=nv>player</span> <span class=p>=</span> <span class=n>player</span><span class=p>,</span> <span class=n>isPlayerReady</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=bp>print</span><span class=p>(</span><span class=s>&#34;[VideoCardViewModel] Starting playback - ID: </span><span class=si>\(</span><span class=n>mediaItem</span><span class=p>.</span><span class=n>id</span><span class=si>)</span><span class=s>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>player</span><span class=p>.</span><span class=n>play</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=bp>print</span><span class=p>(</span><span class=s>&#34;[VideoCardViewModel] Waiting for player to be ready - ID: </span><span class=si>\(</span><span class=n>mediaItem</span><span class=p>.</span><span class=n>id</span><span class=si>)</span><span class=s>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p>Each problem solved gave me a deeper understanding of iOS&rsquo;s image handling system.</p><h2 id=future-vision-ai-powered-photo-management-with-fastvit>Future Vision: AI-Powered Photo Management with FastViT</h2><h3 id=the-new-era-of-intelligent-photo-analysis>The New Era of Intelligent Photo Analysis</h3><p>As the project evolved, I increasingly recognized the enormous potential of artificial intelligence in the field of photo management. After multiple conversations with users, I discovered a common need: they all wanted photo management to no longer rely on manual organization but instead automatically identify photo content and categorize it. This is precisely the transformation that FastViT technology will bring us.</p><p>FastViT, as a lightweight and efficient Vision Transformer model, not only performs excellently in image recognition accuracy compared to traditional CNN models, but more importantly, its computational efficiency is high enough to allow local inference on mobile devices. This means users&rsquo; photos don&rsquo;t need to be uploaded to the cloud for intelligent analysis.</p><h3 id=fastvit-integration-plan>FastViT Integration Plan</h3><h4 id=phase-one-basic-recognition-capabilities>Phase One: Basic Recognition Capabilities</h4><p>In the first phase of integrating FastViT, I plan to implement the following core functions:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>class</span> <span class=nc>AIPhotoAnalyzer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>let</span> <span class=nv>fastVitModel</span><span class=p>:</span> <span class=n>FastVitModel</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>func</span> <span class=nf>analyzePhoto</span><span class=p>(</span><span class=kc>_</span> <span class=n>photo</span><span class=p>:</span> <span class=n>UIImage</span><span class=p>)</span> <span class=n>async</span> <span class=kr>throws</span> <span class=p>-&gt;</span> <span class=n>PhotoAnalysisResult</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Analyze photo using FastViT model</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>features</span> <span class=p>=</span> <span class=k>try</span> <span class=n>await</span> <span class=n>fastVitModel</span><span class=p>.</span><span class=n>extractFeatures</span><span class=p>(</span><span class=n>from</span><span class=p>:</span> <span class=n>photo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Classify based on features</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>categories</span> <span class=p>=</span> <span class=n>classifyImage</span><span class=p>(</span><span class=n>features</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>objects</span> <span class=p>=</span> <span class=n>detectObjects</span><span class=p>(</span><span class=n>features</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>sceneType</span> <span class=p>=</span> <span class=n>determineSceneType</span><span class=p>(</span><span class=n>features</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>PhotoAnalysisResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>categories</span><span class=p>:</span> <span class=n>categories</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>detectedObjects</span><span class=p>:</span> <span class=n>objects</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>sceneType</span><span class=p>:</span> <span class=n>sceneType</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>quality</span><span class=p>:</span> <span class=n>assessImageQuality</span><span class=p>(</span><span class=n>photo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Other auxiliary methods...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p>This will add intelligent tags to each photo, including:</p><ol><li><strong>Scene Recognition</strong>: Automatically identify the type of scene captured in the photo (beach, city, forest, indoor, etc.)</li><li><strong>Object Detection</strong>: Identify the main objects in the photo (people, animals, buildings, food, etc.)</li><li><strong>Photo Quality Assessment</strong>: Automatically evaluate the clarity, exposure, and composition quality of the photo</li></ol><h4 id=phase-two-advanced-facial-and-group-analysis>Phase Two: Advanced Facial and Group Analysis</h4><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>extension</span> <span class=nc>AIPhotoAnalyzer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>func</span> <span class=nf>extractFacialFeatures</span><span class=p>(</span><span class=kc>_</span> <span class=n>photo</span><span class=p>:</span> <span class=n>UIImage</span><span class=p>)</span> <span class=n>async</span> <span class=kr>throws</span> <span class=p>-&gt;</span> <span class=p>[</span><span class=n>FaceFeature</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Use FastViT for facial feature extraction</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>faces</span> <span class=p>=</span> <span class=k>try</span> <span class=n>await</span> <span class=n>fastVitModel</span><span class=p>.</span><span class=n>detectFaces</span><span class=p>(</span><span class=k>in</span><span class=p>:</span> <span class=n>photo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>faces</span><span class=p>.</span><span class=bp>map</span> <span class=p>{</span> <span class=n>face</span> <span class=k>in</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>FaceFeature</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>boundingBox</span><span class=p>:</span> <span class=n>face</span><span class=p>.</span><span class=n>boundingBox</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>landmarks</span><span class=p>:</span> <span class=n>face</span><span class=p>.</span><span class=n>landmarks</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>embedding</span><span class=p>:</span> <span class=n>face</span><span class=p>.</span><span class=n>embedding</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>expressions</span><span class=p>:</span> <span class=n>analyzeExpressions</span><span class=p>(</span><span class=n>face</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>func</span> <span class=nf>groupSimilarFaces</span><span class=p>(</span><span class=kc>_</span> <span class=n>faces</span><span class=p>:</span> <span class=p>[</span><span class=n>FaceFeature</span><span class=p>])</span> <span class=p>-&gt;</span> <span class=p>[</span><span class=n>FaceGroup</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Use clustering algorithms to group similar faces</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Return face grouping results</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p>This phase will introduce more complex analytical capabilities:</p><ol><li><strong>Facial Recognition and Grouping</strong>: Identify faces in photos and automatically group faces of the same person in different photos, making it easy for users to find photos of specific individuals</li><li><strong>Expression and Emotion Analysis</strong>: Recognize expressions and emotions of people in photos, helping users find photos from joyful or special moments</li><li><strong>Social Relationship Graph</strong>: Build a social relationship graph based on the frequency of people appearing together in photos, helping users better organize social memories</li></ol><h4 id=phase-three-intelligent-organization-and-narrative>Phase Three: Intelligent Organization and Narrative</h4><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MemoryStoryGenerator</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>let</span> <span class=nv>aiAnalyzer</span><span class=p>:</span> <span class=n>AIPhotoAnalyzer</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>let</span> <span class=nv>narrativeModel</span><span class=p>:</span> <span class=n>NarrativeModel</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>func</span> <span class=nf>generateStory</span><span class=p>(</span><span class=n>from</span> <span class=n>photos</span><span class=p>:</span> <span class=p>[</span><span class=n>AnalyzedPhoto</span><span class=p>],</span> <span class=n>theme</span><span class=p>:</span> <span class=n>StoryTheme</span><span class=p>?</span> <span class=p>=</span> <span class=kc>nil</span><span class=p>)</span> <span class=n>async</span> <span class=kr>throws</span> <span class=p>-&gt;</span> <span class=n>MemoryStory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Select key photos</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>keyPhotos</span> <span class=p>=</span> <span class=n>selectKeyPhotos</span><span class=p>(</span><span class=n>photos</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Determine storyline</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>storyLine</span> <span class=p>=</span> <span class=n>determineStoryline</span><span class=p>(</span><span class=n>keyPhotos</span><span class=p>,</span> <span class=n>theme</span><span class=p>:</span> <span class=n>theme</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Generate story title and description</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>storyTitle</span> <span class=p>=</span> <span class=k>try</span> <span class=n>await</span> <span class=n>narrativeModel</span><span class=p>.</span><span class=n>generateTitle</span><span class=p>(</span><span class=k>for</span><span class=p>:</span> <span class=n>storyLine</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>storyDescription</span> <span class=p>=</span> <span class=k>try</span> <span class=n>await</span> <span class=n>narrativeModel</span><span class=p>.</span><span class=n>generateDescription</span><span class=p>(</span><span class=k>for</span><span class=p>:</span> <span class=n>storyLine</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>MemoryStory</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>title</span><span class=p>:</span> <span class=n>storyTitle</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>description</span><span class=p>:</span> <span class=n>storyDescription</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>photos</span><span class=p>:</span> <span class=n>arrangePhotosForStory</span><span class=p>(</span><span class=n>keyPhotos</span><span class=p>,</span> <span class=n>storyline</span><span class=p>:</span> <span class=n>storyLine</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>coverPhoto</span><span class=p>:</span> <span class=n>selectCoverPhoto</span><span class=p>(</span><span class=n>keyPhotos</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Helper methods...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p>The final phase will introduce the most innovative features:</p><ol><li><strong>Intelligent Story Generation</strong>: The system will analyze photos that are close in time, same in location, or related in theme to automatically generate &ldquo;memory stories,&rdquo; such as &ldquo;Summer Beach Trip 2023&rdquo;</li><li><strong>Key Moment Capture</strong>: Identify and highlight photos of important moments from a large collection, such as the candle-blowing moment at a birthday party</li><li><strong>Photo Quality Sorting</strong>: Automatically select photos with the best composition and highest clarity among similar photos, helping users quickly filter</li><li><strong>Personalized Recommendation System</strong>: Learn users&rsquo; photo preferences based on their browsing and saving habits, providing personalized photo recommendations</li></ol><h3 id=technical-challenges-and-solutions>Technical Challenges and Solutions</h3><p>Integrating FastViT is no easy task, and we will face several major challenges:</p><h4 id=1-mobile-performance-optimization>1. Mobile Performance Optimization</h4><p>Although FastViT is relatively lightweight, running complex neural networks on mobile phones remains challenging. I plan to adopt the following strategies:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ModelOptimizer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>func</span> <span class=nf>optimizeModel</span><span class=p>()</span> <span class=p>-&gt;</span> <span class=n>OptimizedModel</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Model quantization, converting floating-point weights to 8-bit or 16-bit integers</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>quantizedModel</span> <span class=p>=</span> <span class=n>quantizeModel</span><span class=p>(</span><span class=n>originalModel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Model pruning, removing unnecessary connections</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>prunedModel</span> <span class=p>=</span> <span class=n>pruneModel</span><span class=p>(</span><span class=n>quantizedModel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Compile optimization using CoreML</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>compileCoreMLModel</span><span class=p>(</span><span class=n>prunedModel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><ul><li><strong>Model Quantization and Pruning</strong>: Reduce model size and memory usage</li><li><strong>Asynchronous Processing</strong>: Execute analysis tasks in background threads to ensure UI fluidity</li><li><strong>Batch Processing Mechanism</strong>: Analyze multiple photos at once to improve throughput</li><li><strong>Tiered Analysis</strong>: Perform simple, quick analysis first, and conduct deeper analysis when users view specific photos</li></ul><h4 id=2-privacy-protection>2. Privacy Protection</h4><p>User photos often contain private information, making privacy protection crucial:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>class</span> <span class=nc>PrivacyManager</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>func</span> <span class=nf>processImageWithPrivacyProtection</span><span class=p>(</span><span class=kc>_</span> <span class=n>image</span><span class=p>:</span> <span class=n>UIImage</span><span class=p>)</span> <span class=p>-&gt;</span> <span class=n>UIImage</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Blur sensitive areas such as IDs, credit cards, etc.</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nv>sensitiveRegions</span> <span class=p>=</span> <span class=n>detectSensitiveRegions</span><span class=p>(</span><span class=n>image</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Store analysis results locally only, don&#39;t upload original photos</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>blurRegions</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>regions</span><span class=p>:</span> <span class=n>sensitiveRegions</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><ul><li><strong>Local Processing</strong>: All photo analysis completed locally on the device, not uploaded to the cloud</li><li><strong>Sensitive Information Detection</strong>: Automatically identify and blur sensitive information in photos, such as documents and IDs</li><li><strong>User Control</strong>: Allow users to turn off specific types of analysis features at any time</li><li><strong>Data Isolation</strong>: Analysis results stored only on the user&rsquo;s device, not shared with other services</li></ul><h4 id=3-continuous-learning-and-personalization>3. Continuous Learning and Personalization</h4><p>Each user&rsquo;s photo habits and preferences differ, and the system needs to adapt to these differences:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-swift"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>class</span> <span class=nc>PersonalizedLearningSystem</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>var</span> <span class=nv>userPreferenceModel</span><span class=p>:</span> <span class=n>UserPreferenceModel</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>func</span> <span class=nf>updateModelBasedOnUserFeedback</span><span class=p>(</span><span class=kc>_</span> <span class=n>feedback</span><span class=p>:</span> <span class=n>UserFeedback</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Update preference model based on user&#39;s actions with photos</span>
</span></span><span class=line><span class=cl>        <span class=n>userPreferenceModel</span><span class=p>.</span><span class=n>update</span><span class=p>(</span><span class=n>with</span><span class=p>:</span> <span class=n>feedback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Adjust classification thresholds and weights</span>
</span></span><span class=line><span class=cl>        <span class=n>adjustClassificationParameters</span><span class=p>(</span><span class=n>based</span><span class=p>:</span> <span class=n>userPreferenceModel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><ul><li><strong>Feedback Learning</strong>: Adjust algorithms based on user behavior of keeping/deleting photos</li><li><strong>Preference Modeling</strong>: Build user photo preference models for personalized sorting and recommendations</li><li><strong>Incremental Learning</strong>: Models can continuously optimize with use without requiring complete retraining</li><li><strong>Multi-scenario Adaptation</strong>: Adjust analysis strategies for different user scenarios (family photos, travel photos, work documents, etc.)</li></ul><h3 id=future-ai-driven-user-experience>Future AI-Driven User Experience</h3><p>Imagine what the user experience will be like when FastViT is fully integrated:</p><p>John opens PhotoManager, and the system automatically presents several featured &ldquo;memory stories&rdquo; for him—&ldquo;Last Weekend&rsquo;s Family Barbecue,&rdquo; &ldquo;Last Summer&rsquo;s European Trip,&rdquo; &ldquo;Daughter&rsquo;s Growth Record.&rdquo; These are all automatically generated by the system based on the time, location, and content of the photos.</p><p>When he wants to organize his albums, he no longer needs to view them one by one. The system has intelligently marked photo quality—clear, well-composed photos are marked as &ldquo;keep,&rdquo; while blurry, duplicate photos are suggested for &ldquo;deletion.&rdquo;</p><p>He searches for &ldquo;photos with Sarah,&rdquo; and the system immediately displays all photos containing him and Sarah, even if these photos were never manually tagged.</p><p>The entire experience will transform from passive manual organization to active intelligent recommendations, returning photo management to its original purpose—appreciating and sharing beautiful memories, rather than being troubled by tedious organization work.</p><h2 id=conclusion-a-project-about-memories>Conclusion: A Project About Memories</h2><p>&ldquo;PhotoManager&rdquo; is not just a technical project; it&rsquo;s a project about memories. Each photo carries a story, a moment, an emotion. Through this application, I hope people can better preserve and organize these precious fragments of memory.</p><p>That two-hour journey searching for memories that night eventually became the starting point for this project. From a simple idea to a complex implementation, from personal needs to a universal solution, the process was full of challenges but also full of gains.</p><p>I believe that when you open this application and start organizing your photos, you&rsquo;ll also embark on a beautiful journey of memories. Those forgotten smiles, those distant landscapes, those precious moments will all reappear before your eyes, allowing you to revisit those fragments of life worth treasuring.</p><p>That is the meaning of &ldquo;PhotoManager&rdquo;: not just managing photos, but managing memories, managing emotions, managing those beautiful moments in life. With the integration of AI capabilities, this vision will be further realized, making every memory easily found and giving every photo its rightful place.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2025-05-06&nbsp;<a class=git-hash href=https://github.com/dillonzq/LoveIt/commit/c607f28f8369ceb8c6eb7a0f54b934b69a378b1c target=_blank title="commit by max-7189(maxzhao0610@gmail.com) c607f28f8369ceb8c6eb7a0f54b934b69a378b1c: updeat posts">
<i class="fas fa-hashtag fa-fw" aria-hidden=true></i>c607f28</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/maxblog/photo-manager-project/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on X" data-sharer=x data-url=https://max-7189.github.io/maxblog/photo-manager-project/ data-title="PhotoManager: Organizing Memories, Simplifying Life" data-hashtags="iOS Development,Swift,SwiftUI,Photo Management,AI,Machine Learning"><i class="fab fa-x-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Threads" data-sharer=threads data-url=https://max-7189.github.io/maxblog/photo-manager-project/ data-title="PhotoManager: Organizing Memories, Simplifying Life"><i class="fab fa-threads fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://max-7189.github.io/maxblog/photo-manager-project/ data-hashtag="iOS Development"><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://max-7189.github.io/maxblog/photo-manager-project/ data-title="PhotoManager: Organizing Memories, Simplifying Life"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://max-7189.github.io/maxblog/photo-manager-project/ data-title="PhotoManager: Organizing Memories, Simplifying Life"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@14.9.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://max-7189.github.io/maxblog/photo-manager-project/ data-title="PhotoManager: Organizing Memories, Simplifying Life"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Diaspora" data-sharer=diaspora data-url=https://max-7189.github.io/maxblog/photo-manager-project/ data-title="PhotoManager: Organizing Memories, Simplifying Life" data-description><i class="fab fa-diaspora fa-fw" aria-hidden=true></i></a><a href="https://t.me/share/url?url=https%3a%2f%2fmax-7189.github.io%2fmaxblog%2fphoto-manager-project%2f&amp;text=PhotoManager%3a%20Organizing%20Memories%2c%20Simplifying%20Life" target=_blank title="Share on Telegram"><i class="fab fa-telegram fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/maxblog/tags/ios-development/>IOS Development</a>,&nbsp;<a href=/maxblog/tags/swift/>Swift</a>,&nbsp;<a href=/maxblog/tags/swiftui/>SwiftUI</a>,&nbsp;<a href=/maxblog/tags/photo-management/>Photo Management</a>,&nbsp;<a href=/maxblog/tags/ai/>AI</a>,&nbsp;<a href=/maxblog/tags/machine-learning/>Machine Learning</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/maxblog/>Home</a></span></section></div><div class=post-nav><a href=/maxblog/mermaid-test/ class=prev rel=prev title=Mermaid测试><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Mermaid测试</a>
<a href=/maxblog/graceai-project/ class=next rel=next title="GraceAI Project - Bringing AI Companionship from Science Fiction to Reality">GraceAI Project - Bringing AI Companionship from Science Fiction to Reality<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/maxblog/ target=_blank>Max Zhao</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script src=https://cdn.jsdelivr.net/npm/algoliasearch@5.20.2/dist/lite/builds/browser.umd.min.js></script><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/copy-tex.min.js></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/mhchem.min.js></script><script>window.config={comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"4D1IDY8JU6",algoliaIndex:"index",algoliaSearchKey:"05332ac5ed76655a511f0da583a9afac",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"}}</script><script src=/maxblog/js/theme.min.js></script></body></html>